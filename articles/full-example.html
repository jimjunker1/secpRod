<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>A full example • secpRod</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A full example">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">secpRod</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.101</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Get Started</h6></li>
    <li><a class="dropdown-item" href="../articles/simple-example.html">A few simple examples</a></li>
    <li><a class="dropdown-item" href="../articles/full-example.html">A full example</a></li>
    <li><a class="dropdown-item" href="../articles/sampling-simulation.html">Simulating the sampling of populations</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jimjunker1/secpRod/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>A full example</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jimjunker1/secpRod/blob/main/vignettes/full-example.Rmd" class="external-link"><code>vignettes/full-example.Rmd</code></a></small>
      <div class="d-none name"><code>full-example.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jimjunker1.github.io/secpRod/">secpRod</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: replacing previous import 'dplyr::filter' by 'stats::filter' when</span></span>
<span><span class="co">#&gt; loading 'secpRod'</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mjskay.github.io/ggdist/" class="external-link">ggdist</a></span><span class="op">)</span></span></code></pre></div>
<p>Currently, the analysis is fully implemented for multiple methods
including: increment-summation, size-frequency, production:biomass
ratio, instantaneous growth rate. This walk through will outline a full
example to calculate secondary production using the full workflow from
sample data of length classes to the estimation of secondary production
for whole communities. First, load the package with
<code><a href="https://jimjunker1.github.io/secpRod/">library(secpRod)</a></code>.</p>
<p>The package comes with a number of data sets of macroinvertebrate
species and community data:</p>
<ol style="list-style-type: decimal">
<li><p>simulated data set of a single univoltine species accessed with
<code>data("singleCohortSim")</code></p></li>
<li><p>a full community data set from <span class="citation">Junker and
Cross (2014)</span> that can be accessed with
<code>data("wbtData")</code></p></li>
</ol>
<p>The simulated data set is a single data frame of artificially sampled
size-frequency data through time. This is used in the <a href="https://jimjunker1.github.io/secpRod/articles/simple-example.html">“A
few simple examples” vignette</a>. Here we walk through the full
community data set to showcase the full workflow of .</p>
<p>First, load the data set with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"wbtData"</span>, package<span class="op">=</span><span class="st">"secpRod"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="single-species-walkthrough">Single-species walkthrough<a class="anchor" aria-label="anchor" href="#single-species-walkthrough"></a>
</h3>
<p>A quick walkthrough of the calculation of secondary production for a
single species.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## isolate a single species data frame from sampleInfo object</span></span>
<span></span>
<span><span class="va">chironomid</span> <span class="op">&lt;-</span> <span class="va">wbtData</span><span class="op">[[</span><span class="st">"sampleInfo"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"Chironomidae"</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co">## let's take a look at the data set</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">chironomid</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 5</span></span></span>
<span><span class="co">#&gt;    taxonID      repID dateID              lengthClass  n_m2</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Chironomidae     1 2008-07-17 <span style="color: #949494;">00:00:00</span>         0.5   0  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Chironomidae     1 2008-07-17 <span style="color: #949494;">00:00:00</span>         1    20.8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Chironomidae     1 2008-07-17 <span style="color: #949494;">00:00:00</span>         2    83.3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Chironomidae     1 2008-07-17 <span style="color: #949494;">00:00:00</span>         3   177. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Chironomidae     1 2008-07-17 <span style="color: #949494;">00:00:00</span>         4   135. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Chironomidae     1 2008-07-17 <span style="color: #949494;">00:00:00</span>         5   135. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Chironomidae     1 2008-07-17 <span style="color: #949494;">00:00:00</span>         6   198. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Chironomidae     1 2008-07-17 <span style="color: #949494;">00:00:00</span>         7    72.9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Chironomidae     1 2008-07-17 <span style="color: #949494;">00:00:00</span>         8    20.8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Chironomidae     1 2008-07-17 <span style="color: #949494;">00:00:00</span>         9     0</span></span></code></pre></div>
<p>The data contain all the replicates of density and body length
distributions in long format. This format differs from the simulated
data in <a href="https://jimjunker1.github.io/secpRod/articles/simple-example.html">“A
few simple examples” vignette</a>, in three specific ways to showcase
the flexibility of data inputs: 1) the date information,
<code>dateID</code> is input as a POSIX object, 2) the length and
density information, <code>lengthClass</code> and <code>n_m2</code> are
non-default column names, and 3) there is no individual mass values
associated with the size classes. First, let’s load walk through a
single taxonomic group. First let’s modify the <code>taxaInfo</code>
associated with this group.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">taxaInfo</span> <span class="op">=</span> <span class="va">wbtData</span><span class="op">[[</span><span class="st">'taxaInfo'</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="va">chiroInfo</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">taxaInfo</span>, <span class="va">taxonID</span> <span class="op">==</span> <span class="st">"Chironomidae"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># remove an old column</span></span>
<span><span class="va">chiroInfo</span><span class="op">$</span><span class="va">g.a</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span><span class="co"># let's set the mass formula to a different format</span></span>
<span><span class="va">chiroInfo</span><span class="op">$</span><span class="va">massForm</span> <span class="op">&lt;-</span> <span class="st">"mass~(a*lengthClass^b)*percAsh"</span></span>
<span></span>
<span><span class="co"># finally, let's set the growth formula to the Huryn 1990</span></span>
<span><span class="va">chiroInfo</span><span class="op">$</span><span class="va">growthForm</span> <span class="op">&lt;-</span> <span class="st">"g_d~0.051 - 0.068*log(lengthClass) + 0.006*tempC"</span></span>
<span></span>
<span><span class="va">chiroInfo</span><span class="op">$</span><span class="va">wrap</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span></code></pre></div>
<p>The first step is to convert length to mass for estimating biomass
patterns. Here we use the <code><a href="../reference/convert_length_to_mass.html">convert_length_to_mass()</a></code>
function, which adds a column of the individual masses based on the
length-to-mass formula and coefficients in taxaInfo.</p>
<p>We can take a look at what this looks like:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">chiroInfo</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 13</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   taxonID [1]</span></span></span>
<span><span class="co">#&gt;   taxonID   massForm     a     b percAsh method growthForm min.cpi max.cpi    pb</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Chironom… mass~(a… 0.006  2.77     5.6 sf     g_d~0.051…     335     365   5.8</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: min.growth &lt;dbl&gt;, notes &lt;chr&gt;, wrap &lt;lgl&gt;</span></span></span></code></pre></div>
<p>Information on its use can be viewed with
<code><a href="../reference/convert_length_to_mass.html">?convert_length_to_mass</a></code></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">chiroMass</span> <span class="op">=</span> <span class="fu"><a href="../reference/convert_length_to_mass.html">convert_length_to_mass</a></span><span class="op">(</span>taxaSampleList <span class="op">=</span> <span class="va">chironomid</span>,</span>
<span>                                         taxaInfo <span class="op">=</span> <span class="va">chiroInfo</span>,</span>
<span>                                         lengthValue <span class="op">=</span> <span class="st">'lengthClass'</span>,</span>
<span>                                         massValue <span class="op">=</span> <span class="st">'mass'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">chiroMass</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt;   taxonID      repID dateID              lengthClass  n_m2    mass</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Chironomidae     1 2008-07-17 <span style="color: #949494;">00:00:00</span>         0.5   0   0.004<span style="text-decoration: underline;">93</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Chironomidae     1 2008-07-17 <span style="color: #949494;">00:00:00</span>         1    20.8 0.033<span style="text-decoration: underline;">6</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Chironomidae     1 2008-07-17 <span style="color: #949494;">00:00:00</span>         2    83.3 0.229  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Chironomidae     1 2008-07-17 <span style="color: #949494;">00:00:00</span>         3   177.  0.705  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Chironomidae     1 2008-07-17 <span style="color: #949494;">00:00:00</span>         4   135.  1.56   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Chironomidae     1 2008-07-17 <span style="color: #949494;">00:00:00</span>         5   135.  2.90</span></span></code></pre></div>
<p>From here you can view the size frequency histograms using the
<code><a href="../reference/plot_cohorts.html">plot_cohorts()</a></code> function. Check out the function options
with <code><a href="../reference/plot_cohorts.html">?plot_cohorts</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_cohorts.html">plot_cohorts</a></span><span class="op">(</span>taxaSampleListMass <span class="op">=</span> <span class="va">chiroMass</span>,</span>
<span>             param <span class="op">=</span> <span class="st">'length'</span>,</span>
<span>             lengthValue <span class="op">=</span> <span class="st">'lengthClass'</span>,</span>
<span>             abunValue <span class="op">=</span> <span class="st">'n_m2'</span><span class="op">)</span></span></code></pre></div>
<p><img src="full-example_files/figure-html/plot%20cohort%20lengths-1.png" width="700"></p>
<p>These figures can be helpful for identifying cohort structures and
getting ballpark cohort production intervals (CPI) for species when
estimating production using the size-frequency method. In this case, we
see there is not much for distinguishable cohort structure, such as
clear drops in density and concurrent increases in mass over time.
Rather, there is a fairly consistent length structure and variable
density over time.</p>
<p>We can also plot this taxa using mass as the size variable:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_cohorts.html">plot_cohorts</a></span><span class="op">(</span>taxaSampleListMass <span class="op">=</span> <span class="va">chiroMass</span>,</span>
<span>             param <span class="op">=</span> <span class="st">'mass'</span>,</span>
<span>             massValue <span class="op">=</span> <span class="st">'mass'</span>,</span>
<span>             abunValue <span class="op">=</span> <span class="st">'n_m2'</span><span class="op">)</span></span></code></pre></div>
<p><img src="full-example_files/figure-html/plot%20cohort%20masses-1.png" width="700"></p>
<p>This shows a similar lack of structure. This is not surprising given
the life history of this taxa. This suggest we should use a non-cohort
method for estimating production in this case. Let’s use the
instantaneous growth rate method, using the growth equation from <span class="citation">(<strong>huryn1990?</strong>)</span>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># setting the method to 'igr'</span></span>
<span></span>
<span><span class="va">chiroInfo</span><span class="op">$</span><span class="va">method</span> <span class="op">&lt;-</span> <span class="st">'igr'</span></span></code></pre></div>
<p>The function <code><a href="../reference/calc_production.html">calc_production()</a></code> is the workhorse function
that will estimate population or community production.</p>
<p>To apply it to our single species example, we input the sample
information and taxa information along with how many bootstraps we would
like. Further, because we are using the instantaneous growth method, we
also provide some environmental data to inform the growth rates, in this
case mean monthly temperature, <code>tempC</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">envData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  dateID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">chiroMass</span><span class="op">$</span><span class="va">dateID</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  tempC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">13.69</span>,<span class="fl">9.45</span>,<span class="fl">4.03</span>,<span class="fl">0.78</span>,<span class="fl">0.14</span>,<span class="fl">0.21</span>,<span class="fl">1.28</span>,<span class="fl">4</span>,<span class="fl">7.33</span>,<span class="fl">10.51</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1312</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/calc_production.html">calc_production</a></span><span class="op">(</span></span>
<span>  taxaSampleListMass <span class="op">=</span> <span class="va">chiroMass</span>,</span>
<span>  taxaInfo <span class="op">=</span> <span class="va">chiroInfo</span>,</span>
<span>  bootNum <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  wrap <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  taxaSummary <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  lengthValue <span class="op">=</span> <span class="st">'lengthClass'</span>,</span>
<span>  massValue <span class="op">=</span> <span class="st">'mass'</span>,</span>
<span>  abunValue <span class="op">=</span> <span class="st">'n_m2'</span>,</span>
<span>  dateCol <span class="op">=</span> <span class="st">'dateID'</span>,</span>
<span>  repCol <span class="op">=</span> <span class="st">'repID'</span>,</span>
<span>  envData <span class="op">=</span> <span class="va">envData</span></span>
<span><span class="op">)</span></span></code></pre></div>
<!-- This will output a lot of information though it has a simple structure: -->
<!-- 1) P.boots--vectors of bootstrapped estimates of annual production, annual biomass, and annual abundance. -->
<!-- 2) taxaSummary--this comes in 'full' and 'short' versions. As you see above the full can be a lot. The 'short' is a paired down version of this -->
<!-- ```{r single species short,include=TRUE, echo=TRUE, warning=FALSE, message=FALSE} -->
<!-- calc_production( -->
<!--   taxaSampleListMass = acentrellaMass, -->
<!--   infoCols = c(1:3), -->
<!--   taxaInfo = acentrellaInfo, -->
<!--   bootNum = 10, -->
<!--   wrap = TRUE, -->
<!--   taxaSummary = 'short' -->
<!-- ) -->
<!-- ``` -->
<!-- You can also turn this off with 'none'. -->
<!-- ### An example using the PB method -->
<!-- The pb method allows for multiple options to set the production to biomass ratio: -->
<!-- 1) A single value. This will use the same value for each bootstrap sample. The variability is derived entirely from resampling the sample units (e.g. surbers). -->
<!-- 2) a character string for a distribution from which to sample excluding the `n=`, such as `rnorm(mean = 5, sd = 0.5)`. The function will automatically sample `bootNum` values. -->
<!-- 3) a numeric vector the same length as `bootNum`. This is a more explicit option to set all the values of pb that will be used. In the future, if the length $\neq$ `bootNum` an error will be returned for the taxa. -->
<!-- ```{r modify taxaInfo, include=TRUE, echo=TRUE, warning=FALSE, message=FALSE} -->
<!-- acentrellaInfo$method = "pb" -->
<!-- acentrellaInfo$pb = "runif(min = 3, max = 8)" -->
<!-- calc_production( -->
<!--   taxaSampleListMass = acentrellaMass, -->
<!--   infoCols = c(1:3), -->
<!--   taxaInfo = acentrellaInfo, -->
<!--   bootNum = 10, -->
<!--   wrap = TRUE, -->
<!--   taxaSummary = 'short' -->
<!-- ) -->
<!-- ``` -->
<!-- ## Applying this to multiple taxa -->
<!-- The current internal code to do this with just `calc_production` is still buggy. But you can run production by splitting the full sampleInfo into a list by taxa and using `apply` or functions from the (`purrr` package)[https://purrr.tidyverse.org/] -->
<!-- The code below shows how to accomplish this. Again, only size frequency and pb are accepted currently. -->
<!-- ```{r multi species, include=TRUE, echo=TRUE, warning=FALSE, message=FALSE} -->
<!-- # load needed packages -->
<!-- library(magrittr) -->
<!-- library(purrr) -->
<!-- # The sampleInfo is already a list by taxonID -->
<!-- str(wbtData[['sampleInfo']], list.len = 5) -->
<!-- # if you have a large data frame with all taxa the code below shows how to do this: -->
<!-- ## install a package to split into a named_list -->
<!-- # devtools::install_github('jimjunker1/junkR') -->
<!-- # library(junkR) -->
<!-- ## Convert to data frame -->
<!-- # sampleInfoDf = wbtData[['sampleInfo']] %>% bind_rows -->
<!-- ## Convert back to named list split by taxonID -->
<!-- # sampleInfoList = sampleInfoDf %>% junkR::named_group_split(taxonID) -->
<!-- sampleInfoList = wbtData[['sampleInfo']] -->
<!-- sampleInfoListMass = sampleInfoList %>% -->
<!--   purrr::map( -->
<!--     ~convert_length_to_mass(.x, -->
<!--                             taxaInfo = taxaInfo) -->
<!--   ) -->
<!-- fullProduction = sampleInfoListMass %>% -->
<!--   purrr::map2(., list(taxaInfo), -->
<!--                      ~calc_production(.x, -->
<!--                                       infoCols = c(1:3), -->
<!--                                       taxaInfo = .y, -->
<!--                                       bootNum = 10, -->
<!--                                       wrap = TRUE, -->
<!--                                       taxaSummary = 'short' -->
<!--                                       ) -->
<!--                      ) -->
<!-- str(fullProduction, list.len = 5) -->
<!-- ``` -->
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-junker2014" class="csl-entry">
Junker, James R., and Wyatt F. Cross. 2014. <span>“Seasonality in the
Trophic Basis of a Temperate Stream Invertebrate Assemblage:
<span>Importance</span> of Temperature and Food Quality.”</span>
<em>Limnology and Oceanography</em> 59 (2): 507–18. <a href="https://doi.org/10.4319/lo.2014.59.2.0507" class="external-link">https://doi.org/10.4319/lo.2014.59.2.0507</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jim Junker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
